# hms_itk

#Relational Schema
![WhatsApp Image 2022-12-21 at 01 10 41](https://user-images.githubusercontent.com/113384082/209152114-4a94504d-77f5-4b61-bfc5-ca54a0bf9529.jpeg)


# Database tables

![WhatsApp Image 2022-12-22 at 08 08 26](https://user-images.githubusercontent.com/113384082/209152158-e2e92a71-5330-47a0-92e0-cef96725c40c.jpeg)


![WhatsApp Image 2022-12-22 at 08 08 47](https://user-images.githubusercontent.com/113384082/209152183-8705813d-0c9c-48e5-bf32-523ec62df732.jpeg)


![WhatsApp Image 2022-12-22 at 08 09 03](https://user-images.githubusercontent.com/113384082/209152372-63d7da16-1759-4590-928e-01ff7f032bca.jpeg)


![WhatsApp Image 2022-12-22 at 08 09 47](https://user-images.githubusercontent.com/113384082/209152428-5d4c006f-2933-45f4-b6c0-0a8de7b54ff0.jpeg)


![WhatsApp Image 2022-12-22 at 08 10 11](https://user-images.githubusercontent.com/113384082/209152483-652ba39e-daf2-4bba-8da3-19508df2fae9.jpeg)

# Postman 
### The endpoints collection is attached here in file HSM postman_collection.json:
HSM.postman_collection.json
### A Postman Global Variable was set as token of idToken FireBase with test script in postman in order to mimic a front login token
![image](https://user-images.githubusercontent.com/113384082/209155833-473363d1-e7e7-4872-b806-68f512c5f0c9.png)

pm.test("Set Token",  () => {
    var jsonData = JSON.parse(responseBody);
    var token = jsonData.idToken;
    pm.environment.set("token", token);
})

![WhatsApp Image 2022-12-22 at 08 11 37](https://user-images.githubusercontent.com/113384082/209152652-3931b780-eae0-4ef7-a013-54fc8f2d10b0.jpeg)

![WhatsApp Image 2022-12-22 at 08 12 17](https://user-images.githubusercontent.com/113384082/209152698-f3b543c9-878f-4e93-8c8f-669bbf59d664.jpeg)


# Getting Started

## Clone repo


https://github.com/MarianaLopez-Ksquare/hms_itk.git

## Install Node Dependencies


npm install


## Install typescript 


npm install --save-dev typescript



## .env file data 

In order to test the code, the first step is to customize the environment variables according to your needs, verify that each of the parameters match your location to be able to do the necessary tests, among them do not forget to verify:

<img width="302" alt="image" src="https://user-images.githubusercontent.com/113384082/209153649-c284cfd7-e183-4549-8ba4-0fecdab34e47.png">


DB_PASS="raspberry",
DB_USER="postgres",
DB_NAME="hsm_back",
HOST="localhost",.
DB_PORT=5433,
PORT=3000,
DIALECT="postgres",

GOOGLE_APPLICATION_CREDENTIALS = "./firebase.json"

CLAVE_API_WEB="AIzaSyCY-veu5OPCdhvlgRVvC0bsfNbTNmzsW6w"

## GOOGLE_APPLICATION_CREDENTIALS - Document


## To run the project


npm run dev



## Generate tokens for testing on postman

-Generate your token for an admin user
-Generate your token for a patient
-Generate your token for a doctor


# The endpoints collection is attached here in file HSM postman_collection.json:
HSM.postman_collection.json
# A Postman Global Variable was set as token of idToken FireBase with test script in postman
pm.test("Set Token",  () => {
    var jsonData = JSON.parse(responseBody);
    var token = jsonData.idToken;
    pm.environment.set("token", token);
})

![image](https://user-images.githubusercontent.com/113384082/209155418-7e33acc2-2285-4f74-9747-73ed96e42a66.png)


